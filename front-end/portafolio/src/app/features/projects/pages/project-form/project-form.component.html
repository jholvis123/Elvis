<div class="container mx-auto px-4 py-12 max-w-4xl">
    <form [formGroup]="projectForm" (ngSubmit)="onSubmit()">

        <!-- Header -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-white mb-2">
                {{ isEditMode ? 'Editar Proyecto' : 'Nuevo Proyecto' }}
            </h1>
            <p class="text-gray-400">{{ isEditMode ? 'Actualiza la información del proyecto' : 'Completa los datos del
                nuevo proyecto' }}</p>
        </div>

        <!-- Error Message -->
        <div *ngIf="error" class="mb-6 p-4 bg-red-500/20 border border-red-500/50 rounded-lg">
            <p class="text-red-200">{{ error }}</p>
        </div>

        <!-- Title -->
        <div class="mb-6">
            <label class="block text-white font-medium mb-2">Título *</label>
            <input type="text" formControlName="title"
                class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"
                placeholder="Nombre del proyecto" />
            <div *ngIf="projectForm.get('title')?.invalid && projectForm.get('title')?.touched"
                class="mt-1 text-red-400 text-sm">
                El título es requerido (mínimo 3 caracteres)
            </div>
        </div>

        <!-- Short Description -->
        <div class="mb-6">
            <label class="block text-white font-medium mb-2">Descripción Corta *</label>
            <input type="text" formControlName="short_description"
                class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"
                placeholder="Resumen breve del proyecto (máx 200 caracteres)" maxlength="200" />
            <div *ngIf="projectForm.get('short_description')?.invalid && projectForm.get('short_description')?.touched"
                class="mt-1 text-red-400 text-sm">
                La descripción corta es requerida
            </div>
        </div>

        <!-- Description -->
        <div class="mb-6">
            <label class="block text-white font-medium mb-2">Descripción Completa *</label>
            <textarea formControlName="description" rows="6"
                class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"
                placeholder="Descripción detallada del proyecto, objetivos, características..."></textarea>
            <div *ngIf="projectForm.get('description')?.invalid && projectForm.get('description')?.touched"
                class="mt-1 text-red-400 text-sm">
                La descripción es requerida (mínimo 50 caracteres)
            </div>
        </div>

        <!-- Image URL -->
        <div class="mb-6">
            <label class="block text-white font-medium mb-2">URL de Imagen *</label>
            <input type="url" formControlName="image_url"
                class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"
                placeholder="https://ejemplo.com/imagen.jpg" />
        </div>

        <!-- URLs -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div>
                <label class="block text-white font-medium mb-2">GitHub URL</label>
                <input type="url" formControlName="github_url"
                    class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"
                    placeholder="https://github.com/..." />
            </div>
            <div>
                <label class="block text-white font-medium mb-2">Demo URL</label>
                <input type="url" formControlName="demo_url"
                    class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"
                    placeholder="https://demo.ejemplo.com" />
            </div>
        </div>

        <!-- Technologies -->
        <div class="mb-6">
            <div class="flex justify-between items-center mb-2">
                <label class="block text-white font-medium">Tecnologías *</label>
                <button type="button" (click)="addTechnology()"
                    class="px-3 py-1 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded-lg transition">
                    + Agregar
                </button>
            </div>
            <div formArrayName="technologies" class="space-y-2">
                <div *ngFor="let tech of technologies.controls; let i = index" class="flex gap-2">
                    <input [formControlName]="i" type="text"
                        class="flex-1 px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"
                        placeholder="Nombre de la tecnología" />
                    <button type="button" (click)="removeTechnology(i)"
                        class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition">
                        ✕
                    </button>
                </div>
            </div>
            <div *ngIf="technologies.length === 0" class="mt-1 text-gray-400 text-sm">
                Agrega al menos una tecnología
            </div>
        </div>

        <!-- Highlights -->
        <div class="mb-6">
            <div class="flex justify-between items-center mb-2">
                <label class="block text-white font-medium">Características Destacadas</label>
                <button type="button" (click)="addHighlight()"
                    class="px-3 py-1 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded-lg transition">
                    + Agregar
                </button>
            </div>
            <div formArrayName="highlights" class="space-y-2">
                <div *ngFor="let highlight of highlights.controls; let i = index" class="flex gap-2">
                    <input [formControlName]="i" type="text"
                        class="flex-1 px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"
                        placeholder="Característica destacada" />
                    <button type="button" (click)="removeHighlight(i)"
                        class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition">
                        ✕
                    </button>
                </div>
            </div>
        </div>

        <!-- Settings -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <div>
                <label class="flex items-center">
                    <input type="checkbox" formControlName="featured"
                        class="w-5 h-5 text-purple-600 bg-white/10 border-white/20 rounded focus:ring-purple-500" />
                    <span class="ml-2 text-white">Proyecto destacado</span>
                </label>
            </div>
            <div>
                <label class="block text-white font-medium mb-2">Orden de visualización</label>
                <input type="number" formControlName="order"
                    class="w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"
                    placeholder="0" />
            </div>
        </div>

        <!-- Actions -->
        <div class="flex gap-3">
            <button type="submit" [disabled]="loading"
                class="px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition disabled:opacity-50">
                {{ loading ? 'Guardando...' : (isEditMode ? 'Actualizar' : 'Crear') }} Proyecto
            </button>

            <button *ngIf="isEditMode && projectId" type="button" (click)="publishProject()" [disabled]="loading"
                class="px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition disabled:opacity-50">
                Publicar
            </button>

            <a [routerLink]="isEditMode ? ['/projects', projectId] : ['/projects']"
                class="px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white font-medium rounded-lg transition">
                Cancelar
            </a>
        </div>
    </form>
</div>